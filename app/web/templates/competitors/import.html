{% extends "layouts/base.html" %}

{% block content %}
<div class="container py-4">
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card border-golden h-100 shadow-sm">
                <div class="card-header bg-golden text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-house-heart me-2"></i>{{ _('Наши ЖК') }}</h5>
                    <span class="badge bg-white text-dark small">Автоматизация + Excel</span>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="text-muted small mb-4">
                        Используйте этот блок для управления <strong>вашими</strong> проектами.
                        Координаты, класс, высота потолков и стадия сохраняются из файла.
                        <span class="text-dark fw-bold">Аналитика (продажи, остатки, цена дна) подтягивается из системы автоматически.</span>
                    </p>

                    <div class="mt-auto">
                        <a href="{{ url_for('competitor.export_our') }}" class="btn btn-outline-golden btn-sm w-100 mb-3">
                            <i class="bi bi-download me-2"></i>{{ _('Скачать список наших ЖК') }}
                        </a>

                        <form action="{{ url_for('competitor.import_our') }}" method="POST" enctype="multipart/form-data">
                            <div class="input-group input-group-sm">
                                <input type="file" name="file" class="form-control" required>
                                <button class="btn btn-golden" type="submit">{{ _('Загрузить') }}</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-radar me-2"></i>{{ _('Конкуренты') }}</h5>
                    <span class="badge bg-secondary small">Ручной ввод</span>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="text-muted small mb-4">
                        Загрузка данных о внешних проектах. Все показатели, включая <strong>количество объектов, проданные квартиры и цены дна</strong>, должны быть заполнены в Excel-файле вручную.
                    </p>

                    <div class="mt-auto">
                        <a href="{{ url_for('competitor.export_comp') }}" class="btn btn-outline-secondary btn-sm w-100 mb-3">
                            <i class="bi bi-file-earmark-excel me-2"></i>{{ _('Скачать базу конкурентов') }}
                        </a>

                        <form action="{{ url_for('competitor.import_comp') }}" method="POST" enctype="multipart/form-data">
                            <div class="input-group input-group-sm">
                                <input type="file" name="file" class="form-control" required>
                                <button class="btn btn-dark" type="submit">{{ _('Загрузить') }}</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4 text-center">
        <a href="{{ url_for('competitor.map_view') }}" class="btn btn-link text-secondary">
            <i class="bi bi-arrow-left me-2"></i>{{ _('Вернуться к карте') }}
        </a>
    </div>
</div>
{% endblock %}